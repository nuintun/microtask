/**
* @module microtask
* @author nuintun
* @license MIT
* @version 0.0.1
* @description A pure JavaScript cross browser microtask.
* @see https://nuintun.github.io/microtask
*/
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("microtask",t):n.microtask=t()}(this,function(){"use strict";function n(n){return"function"==typeof n&&r.test(n)}function t(n,t){this.task=n,this.args=t}function e(){for(var n=0;n<h.length;n++)h[n].run();h=[],g=!1}var r=Function.prototype.toString.call(Function);r=(r=r.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")).replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),r=new RegExp("^"+r+"$");var o=window.Promise,u={support:function(){return n(o)},install:function(n){return function(){o.resolve().then(n)}}},i=window.MutationObserver||window.WebKitMutationObserver,a={support:function(){return n(i)},install:function(n){var t=0,e=new i(n),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}},c=window.VBArray,s=window.MessageChannel,f={support:function(){return!n(c)&&n(s)},install:function(n){var t=new s;return t.port1.onmessage=n,function(){t.port2.postMessage(0)}}},l={support:function(){return"onreadystatechange"in document.createElement("script")},install:function(n){return function(){var t=document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},document.documentElement.appendChild(t)}}},p={support:function(){return!0},install:function(n){return function(){setTimeout(n,0)}}};t.prototype.run=function(){var n=this.task,t=this.args;switch(t.length){case 0:return n();case 1:return n(t[0]);case 2:return n(t[0],t[1]);case 3:return n(t[0],t[1],t[2]);default:return n.apply(null,t)}};for(var d,h=[],g=!1,m=[u,a,f,l,p],v=0,w=m.length;v<w;v++)if((d=m[v]).support()){d=d.install(e);break}return function(n){var e=function(n,t){t>>>=0;var e=n.length;if(t>=e)return[];for(var r=new Array(e-t);e-- >t;)r[e-t]=n[e];return r}(arguments,1);h[h.length]=new t(n,e),g||(g=!0,d())}});
//# sourceMappingURL=microtask.js.map