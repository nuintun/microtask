/**
 * @module microtask
 * @author nuintun
 * @license MIT
 * @version 0.0.1
 * @description A pure JavaScript cross browser microtask.
 * @see https://nuintun.github.io/microtask
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("microtask",t):n.microtask=t()}(this,function(){"use strict";var n=Function.prototype.toString.call(Function);n=(n=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")).replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),n=new RegExp("^"+n+"$");function t(t){return"function"==typeof t&&n.test(t)}var e=window.Promise,r={support:function(){return t(e)},install:function(n){return function(){e.resolve().then(n)}}},o=window.MutationObserver||window.WebKitMutationObserver,u={support:function(){return t(o)},install:function(n){var t=0,e=new o(n),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}},i=window.VBArray,a=window.MessageChannel,c={support:function(){return!t(i)&&t(a)},install:function(n){var t=new a;return t.port1.onmessage=n,function(){t.port2.postMessage(0)}}},s={support:function(){return"onreadystatechange"in document.createElement("script")},install:function(n){return function(){var t=document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},document.documentElement.appendChild(t)}}},f={support:function(){return!0},install:function(n){return function(){setTimeout(n,0)}}};function l(n,t){this.task=n,this.args=t}l.prototype.run=function(){var n=this.task,t=this.args;switch(t.length){case 0:return n();case 1:return n(t[0]);case 2:return n(t[0],t[1]);case 3:return n(t[0],t[1],t[2]);default:return n.apply(null,t)}};var p,d=[],h=!1,g=[r,u,c,s,f];function m(){for(var n=0;n<d.length;n++)d[n].run();d=[],h=!1}for(var v=0,w=g.length;v<w;v++)if((p=g[v]).support()){p=p.install(m);break}return function(n){var t=function(n,t){t>>>=0;var e=n.length;if(t>=e)return[];for(var r=new Array(e-t);e-- >t;)r[e-t]=n[e];return r}(arguments,1);d[d.length]=new l(n,t),h||(h=!0,p())}});
//# sourceMappingURL=microtask.js.map