!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("microtask",t):n.microtask=t()}(this,function(){"use strict";function n(n){return"function"==typeof n&&e.test(n)}function t(n,t){this.task=n,this.args=t}function r(){var n=d;d=[];for(var t=0,r=n.length;t<r;t++)n[t].run()}var e=Function.prototype.toString.call(Function);e=(e=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")).replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),e=new RegExp("^"+e+"$");var o=window.Promise,u={support:function(){return n(o)},install:function(n){return function(){o.resolve().then(n)}}},i=window.MutationObserver||window.WebKitMutationObserver,a={support:function(){return n(i)},install:function(n){var t=0,r=new i(n),e=document.createTextNode("");return r.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}},s=window.VBArray,c=window.MessageChannel,f={support:function(){return!n(s)&&n(c)},install:function(n){var t=new c;return t.port1.onmessage=n,function(){t.port2.postMessage(0)}}},p={support:function(){return!0},install:function(n){var t=new Image;return t.onerror=n,function(){t.src=""}}};t.prototype.run=function(){var n=this.task,t=this.args;switch(t.length){case 0:return n();case 1:return n(t[0]);case 2:return n(t[0],t[1]);case 3:return n(t[0],t[1],t[2]);default:return n.apply(null,t)}};for(var l,d=[],w=Array.prototype.slice,v=[u,a,f,p],g=0,h=v.length;g<h;g++)if((l=v[g]).support()){l=l.install(r);break}return function(n){var r=w.call(arguments,1);d.push(new t(n,r)),l()}});
//# sourceMappingURL=microtask.js.map